import{_ as b}from"./Footer.e6485fe5.js";import{_ as g}from"./Research.1ccfe14c.js";import{u as H,s as w,_ as C}from"./useHeadSeo.d3db824e.js";import{h as N,w as T,g as W,y as $,d as n,o as k,i as A,j as B,m as P,a as y,b as V}from"./entry.b64d388a.js";import{b as G}from"./usePageTransition.c85436b5.js";import{u as j}from"./useErrorPage.23109362.js";import"./indexComponents.44e4cc59.js";import"./Listing.a298d72a.js";import"./useResourceIndexData.dc2ced4d.js";import"./usePageLoading.6c7406d2.js";import"./lang.4a9029fb.js";const D={class:"container"},Q={__name:"index",async setup(E){var p,_,h,d;let a,u;const{$api:c,$twill:m}=N(),{data:e,error:l}=([a,u]=T(()=>G("research-index",()=>Promise.all([c.topicsWhereHas("research-publications"),c.modelsWhereHas("research-publications"),c.contentTypesWhereHas("research-publications"),c.authorsWhereHas("author-groups"),m.find("research-indices").fetch()]),{transform:([r,o,t,s,i])=>({topics:r,models:o,contentTypes:t,authors:s,resource:m.transform(i).pop()})})),a=await a,u(),a);j({data:e,error:l}),H({title:(_=(p=e.value)==null?void 0:p.resource)==null?void 0:_.title,seo:(d=(h=e.value)==null?void 0:h.resource)==null?void 0:d.seo}),W(()=>{w(e.value.resource)});const v=$(()=>{var r,o,t,s;return{topics:(r=e.value)==null?void 0:r.topics,models:(o=e.value)==null?void 0:o.models,contentTypes:(t=e.value)==null?void 0:t.contentTypes,authors:(s=e.value)==null?void 0:s.authors}});return(r,o)=>{const t=b,s=g,i=C;return n(l)?P("",!0):(k(),A(i,{key:0,class:"theme-light-gray",id:"research-index"},{default:B(()=>{var f,x;return[y(t,{name:"Generic",title:(f=n(e).resource)==null?void 0:f.title,theme:(x=n(e).resource)==null?void 0:x.colorTheme},null,8,["title","theme"]),V("div",D,[y(s,{filters:n(v)},null,8,["filters"])])]}),_:1}))}}};export{Q as default};

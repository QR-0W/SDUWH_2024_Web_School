import{_ as N}from"./Footer.e6485fe5.js";import{a as A}from"./Listing.a298d72a.js";import{_ as V}from"./CustomerStory.95104661.js";import{u as q,s as E,_ as G}from"./useHeadSeo.d3db824e.js";import{h as I,w as W,g as j,y as b,d as s,o as B,i as D,j as L,m as C,a as _,c as M,b as R,I as T}from"./entry.b64d388a.js";import{b as z}from"./usePageTransition.c85436b5.js";import{u as $}from"./usePreviewToken.81b6aab9.js";import{u as F}from"./useErrorPage.23109362.js";import"./indexComponents.44e4cc59.js";import"./useResourceIndexData.dc2ced4d.js";import"./usePageLoading.6c7406d2.js";import"./lang.4a9029fb.js";const J={key:0,class:"mt-spacing-6"},K={class:"container"},ie={__name:"index",async setup(O){var k,x,w,S;let u,d;const{$twill:f,$api:v,$helpers:y}=I(),{data:e,error:g}=([u,d]=W(()=>z("customer-story-landing",()=>{const t=f.find("customer-story-landings").include(["customer-stories.media","ctas.cta-links"]);return $().value&&t.query("preview",$().value),Promise.all([v.topicsWhereHas("customer-stories"),v.productsWhereHas("customer-stories"),t.fetch()])},{transform:([t,o,r])=>({topics:t,products:o,resource:f.transform(r).pop()})})),u=await u,d(),u);F({data:e,error:g}),q({title:(x=(k=e.value)==null?void 0:k.resource)==null?void 0:x.title,seo:(S=(w=e.value)==null?void 0:w.resource)==null?void 0:S.seo}),j(()=>{var t;E((t=e==null?void 0:e.value)==null?void 0:t.resource)});const H=b(()=>{var t,o;return{topics:(t=e.value)==null?void 0:t.topics,products:(o=e.value)==null?void 0:o.products}}),h=b(()=>{var t,o,r,m,l,p,a,c,i,n,P;return((r=(o=(t=e.value)==null?void 0:t.resource)==null?void 0:o.customerStories)==null?void 0:r.length)&&{title:(l=(m=e.value)==null?void 0:m.resource)==null?void 0:l.customerStories[0].title,subtitle:(a=(p=e.value)==null?void 0:p.resource)==null?void 0:a.customerStories[0].description,image:y.media.imageByRole((i=(c=e.value)==null?void 0:c.resource)==null?void 0:i.customerStories[0],"cover","listing"),link:{url:y.route((P=(n=e.value)==null?void 0:n.resource)==null?void 0:P.customerStories[0])}}});return(t,o)=>{const r=N,m=A,l=V,p=G;return s(g)?C("",!0):(B(),D(p,{key:0,id:"customer-stories-index"},{default:L(()=>{var a,c,i,n;return[_(r,{intro:(c=(a=s(e))==null?void 0:a.resource)==null?void 0:c.description,name:"Generic",title:(n=(i=s(e))==null?void 0:i.resource)==null?void 0:n.title},null,8,["intro","title"]),s(h)?(B(),M("div",J,[R("div",K,[_(m,T(s(h),{blockLink:!0}),null,16)])])):C("",!0),_(l,{filters:s(H)},null,8,["filters"])]}),_:1}))}}};export{ie as default};

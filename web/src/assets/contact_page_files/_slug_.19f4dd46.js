import{u as k,l as $,a as w,t as v,_ as x,b as B}from"./Landing.df64328f.js";import{u as C,_ as S}from"./useHeadSeo.d3db824e.js";import{r as U,f as b,h as A,g as D,l as p,w as I,o as m,i as c,j as N,d as t,k as T,m as j}from"./entry.b64d388a.js";import{b as z}from"./usePageTransition.c85436b5.js";import{u as h}from"./usePreviewToken.81b6aab9.js";import{u as E}from"./useErrorPage.23109362.js";import"./Footer.e6485fe5.js";import"./Blocks.44438b3b.js";import"./BlockTimedTabs.vue.d0651cc9.js";import"./Listing.a298d72a.js";import"./slugify.3ca60c52.js";import"./useResourceIndexData.dc2ced4d.js";/* empty css                   */import"./List.4457a9db.js";import"./usePageLoading.6c7406d2.js";import"./lang.4a9029fb.js";async function H(){const o=U(""),{browserLanguage:r}=k();return await(async()=>{const a=await $().getItem(w);if(a){o.value=a;return}o.value=r,await $().setItem(w,r)})(),{userLanguage:o}}const ta={__name:"[slug]",async setup(o){var d,_;let r,u;const a=b(),{$api:g}=A(),y=v.includes(`/${a.params.child}/${a.params.slug}`);D(async()=>{const{userLanguage:s}=await H();!a.params.child&&!s.value.startsWith("en")&&p.some(n=>n.code===s.value)&&p.find(n=>n.code===s.value).redirect&&v.includes(`/${a.params.parent}/${a.params.slug}`)&&(window.location.href=`/${s.value}/${a.params.parent}/${a.params.slug}`)});const{data:e,error:l,pending:K}=([r,u]=I(()=>{var s;return z(`landing-${a.params.slug}-${(s=a.params)==null?void 0:s.child}-${a.params.parent}`,()=>{const n=a.params.parent;return p.some(i=>i.code===n)?g.landingBySlug({slug:a.params.slug,parent:a.params.child,preview:h().value,locale:n}):g.landingBySlug({slug:a.params.slug,parent:a.params.parent,preview:h().value,locale:"en"})})}),r=await r,u(),r);return E({data:e,error:l}),C({title:(d=e==null?void 0:e.value)==null?void 0:d.title,seo:(_=e==null?void 0:e.value)==null?void 0:_.seo}),(s,n)=>{const i=x,L=B,P=S;return m(),c(P,{id:`${t(e).type}-${t(e).slug}`,class:T({"translated-page":t(y)})},{default:N(()=>{var f;return[!t(l)&&((f=t(e))==null?void 0:f.template)==="detail"?(m(),c(i,{key:0,data:t(e)},null,8,["data"])):t(l)?j("",!0):(m(),c(L,{key:1,data:t(e)},null,8,["data"]))]}),_:1},8,["id","class"])}}};export{ta as default};

import{d as V,f as q,a as G,i as Q,g as W}from"./Footer.e6485fe5.js";import{a as X,_ as Y}from"./indexComponents.44e4cc59.js";import{_ as Z}from"./Listing.a298d72a.js";import{_ as J}from"./usePageTransition.c85436b5.js";import{o as s,c as a,F as b,a as v,b as o,G as L,i as y,m,t as F,e as K,h as ee,R as te,y as $,C as P,H as T,E as se,ac as le,d as e,j as re,Q as oe}from"./entry.b64d388a.js";import{a as ne,u as ae,_ as ie}from"./useResourceIndexData.dc2ced4d.js";const ce={props:{items:{type:Array,default(){return[]}},listTitle:{type:String,default:null,required:!0},pending:{type:Boolean,default:!1}},methods:{getDisplayDate(l){const r=new Date(l),i={year:"numeric",month:"short",day:"numeric"};return r.toLocaleDateString("en-US",i)},getFullDate(l){const r=new Date(l),i={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString("en-US",i)},handleImageMove(l){const r=this.$el.querySelectorAll(".feed-image"),i=["md:hover-hover:[.group-item:hover_&]:block","md:hover-hover:group-hover:block"];r.length&&r.forEach(p=>{p.style.left=(window.innerWidth/2*3+l.clientX)/4+"px",p.style.top=(window.innerHeight/2*3+l.clientY)/4+"px",i.some(x=>p.classList.contains(x))||p.classList.add(...i)})},handleImageOver(l){l.currentTarget.style.zIndex=11},handleImageLeave(l){l.currentTarget.style.zIndex="unset"}}},ue={class:"pt-spacing-6 theme-light-gray"},de={key:0,class:"f-body-1"},me=o("p",null,"Loading…",-1),pe=[me],ge={"aria-labelledby":"feedHeading"},he={key:0,class:"feed-image pointer-events-none fixed hidden h-[200px] w-[200px] -translate-x-1/2 -translate-y-1/2 transform hover-none:hidden lg:h-[256px] lg:w-[256px]"},_e={class:"cols-container relative"},fe={class:"xs:w-3-cols xs:order-2 xs:mt-16 md:w-2-cols md:order-none md:mt-0 lg:w-2-cols"},ye={"aria-hidden":"true"},be={class:"sr-only"},ve={class:"xs:w-6-cols xs:order-1 md:w-4-cols md:order-none lg:w-6-cols"},xe={class:"flex xs:w-3-cols xs:order-3 xs:mt-16 md:w-2-cols md:order-none md:mt-0 md:justify-between lg:w-4-cols"},we={key:0,class:"hidden lg:mr-gutter lg:block"};function ke(l,r,i,p,x,g){const w=V,n=q,h=G;return s(),a("div",ue,[i.pending?(s(),a("div",de,pe)):(s(),a(b,{key:1},[v(w,{id:"feedHeading",level:"2",title:i.listTitle,class:"sr-only"},null,8,["title"]),o("ul",ge,[(s(!0),a(b,null,L(i.items,(t,k)=>(s(),a("li",{key:k,class:"f-body-1 group-item relative w-full pt-8 pb-16 keyline-t-primary md:pb-8 lg:pt-12 lg:pb-12",onMousemove:r[0]||(r[0]=d=>g.handleImageMove(d)),onMouseover:r[1]||(r[1]=d=>g.handleImageOver(d)),onMouseleave:r[2]||(r[2]=d=>g.handleImageLeave(d))},[t.image?(s(),a("div",he,[t.image&&t.image.src?(s(),y(n,{key:0,image:t.image,class:"m-auto flex h-full w-full items-center object-contain",classes:"h-full w-full",ratioClasses:"h-full w-full",objectContain:!0},null,8,["image"])):m("",!0)])):m("",!0),o("div",_e,[o("div",fe,[t.date?(s(),a(b,{key:0},[o("span",ye,F(g.getDisplayDate(t.date)),1),o("span",be,F(g.getFullDate(t.date)),1)],64)):m("",!0)]),o("div",ve,[t.title?(s(),y(h,{key:0,url:t.url,label:t.title,"inherit-color":"",class:"relative"},null,8,["url","label"])):m("",!0)]),o("div",xe,[t.tags?(s(),a("div",we,[(s(!0),a(b,null,L(t.tags,(d,_)=>(s(),a("span",{key:_,class:"inline-block"},[v(h,{label:d.text,url:d.url,"inherit-color":"",class:"inline-block relative"},null,8,["label","url"]),_!==t.tags.length-1?(s(),a(b,{key:0},[K(", ")],64)):m("",!0)]))),128))])):m("",!0),t.resource&&t.resource.url&&t.resource.text?(s(),y(h,{key:1,label:t.resource.text,url:t.resource.url,"inherit-color":"",class:"ml-auto shrink-0 relative self-start"},null,8,["label","url"])):m("",!0)])])],32))),128))])],64))])}const Se=J(ce,[["render",ke]]),Ce={key:0,class:"mt-40 md:mt-48 md:flex md:flex-row lg:mt-60 w-full"},Ie={class:"w-full flex relative"},Pe={class:"lg:w-10/12 flex-1"},Fe={class:"w-44 absolute top-0 bottom-0 right-0 md:relative lg:w-2/12 h-full md:ml-gutter md:w-1/6"},De=o("span",{class:"flex items-center justify-center"},[o("span",{class:"block leading-none f-ui-1"},"Search")],-1),Le=[De],$e={"aria-hidden":"true",ref:"submit",type:"submit",class:"hidden"},Te={key:3,class:"f-heading-3"},ze={__name:"Research",props:{filters:{type:Object,default:{}},resultsOnly:{type:Boolean,default:!1},layout:{type:String}},setup(l){const r=l,{$api:i,$helpers:p}=ee(),x=ae(),{indexFilters:g,setIndexFilters:w}=ne();w((r==null?void 0:r.filters)??{},{default:"researchPublicationsCount",authors:"authorGroupsCount"});const{data:n,pending:h,selectedFilters:t,setSelectedFilter:k,clearSelectedFilters:d,onSubmit:_,sort:R,sorts:O,setSort:U,page:u,setCurrentPage:B,currentPage:Re,search:S}=x({name:"research",fetchCallback:i.indexResearchPublications,fetchCallbackOptions:{pageSize:X[te]},search:r.search??null}),C=$(()=>{var f,c;return((f=n==null?void 0:n.value)==null?void 0:f.resources)&&p.researchPublications.indexItems((c=n==null?void 0:n.value)==null?void 0:c.resources)}),E=$(()=>{var f,c;return((f=n==null?void 0:n.value)==null?void 0:f.resources)&&p.researchPublicationCardItems((c=n==null?void 0:n.value)==null?void 0:c.resources)});return(f,c)=>{var D;const M=Q,N=W,z=Y,A=Z,j=Se,H=ie;return s(),a("form",{action:"",ref:"form",onSubmit:c[2]||(c[2]=oe(()=>{},["prevent"]))},[l.layout!=="grid"?P((s(),a("div",Ce,[o("div",Ie,[o("div",Pe,[P(o("input",{class:"block ui-input f-ui-1 z-10 w-full outline-none appearance-none border border-secondary bg-primary py-11 h-44 lg:py-16 lg:h-48 pl-14 focus:border-primary focus:outline-0 pr-64 md:pr-0 rounded-[0.2em]",type:"search",placeholder:"Search the database","onUpdate:modelValue":c[0]||(c[0]=I=>se(S)?S.value=I:null)},null,512),[[le,e(S)]])]),o("div",Fe,[v(N,{type:"submit",modifier:"outline",class:"md:hidden",classes:"h-full w-44 border-0","aria-label":"Search",onClick:e(_)},{default:re(()=>[v(M,{name:"Search400",size:"text",class:"f-ui-1 a-icon--no-align min-w-[16px]"})]),_:1},8,["onClick"]),o("button",{"aria-label":"Search",class:"ui-button relative px-16 xs:pt-12 xs:pb-14 lg:pt-13 lg:pb-15 bg-inverse hover:bg-primary hover:text-primary border border-primary hover:border-primary active:border-primary active:bg-primary active:text-primary text-inverse w-full h-full md:block hidden",type:"submit",onClick:c[1]||(c[1]=(...I)=>e(_)&&e(_)(...I))},Le),o("button",$e," Submit ",512)])])],512)),[[T,!l.resultsOnly]]):m("",!0),P(v(z,{selected:e(t),setSelected:e(k),clearSelected:e(d),allFilters:e(g),"on-submit":e(_),sorts:e(O),"set-sort":e(U),sort:e(R),showing:e(u)?Math.min(e(u).perPage,e(u).total):0,"total-results":(D=e(u))==null?void 0:D.total,"data-index-scroll-element":""},null,8,["selected","setSelected","clearSelected","allFilters","on-submit","sorts","set-sort","sort","showing","total-results"]),[[T,!l.resultsOnly]]),l.layout==="grid"?(s(),y(A,{key:1,blockLink:!0,items:e(E),itemsPerRow:4,listOnly:!0,largeTitle:!1,pending:e(h)},null,8,["items","pending"])):(s(),y(j,{key:2,listTitle:"Research Papers",items:e(C),pending:e(h)},null,8,["items","pending"])),l.layout!=="grid"&&e(C)&&e(C).length===0&&!e(h)?(s(),a("span",Te,"No results for “"+F(f.$route.query.q)+"”",1)):m("",!0),e(u)&&e(u).total?(s(),y(H,{key:4,"total-results":e(u).total,"current-page":e(u).currentPage,"from-value":e(u).from,pages:e(u).lastPage,"size-value":e(u).perPage,scrollToTop:!1,onPageChange:e(B)},null,8,["total-results","current-page","from-value","pages","size-value","onPageChange"])):m("",!0)],544)}}};export{ze as _};

import{a as N,i as L,d as D,g as U,h as z}from"./Footer.e6485fe5.js";import{o as a,c,a as u,b as l,F as g,G as f,e as p,t as b,m as h,k as T,ae as C,Q as P,af as k,y as B,r as q,f as $,A as j,i as w,j as S,J as G,C as J,D as V,R as F,B as A,ab as E,L as H,aa as R}from"./entry.b64d388a.js";import{_ as O}from"./usePageTransition.c85436b5.js";const K={props:{filter:Object,id:[Number,String],toggleActiveTab:Function,activeTab:String,closePanel:Function,selected:[Array,String]},methods:{onChange(i,t){this.$emit("radiochange",{field:t,checked:i.target.checked})}}},M={class:"mr-24 shrink-0"},Z=["id","aria-labelledby","aria-hidden"],Q={class:"tab-content xs:w-6-cols-vw md:w-8-cols-vw lg:w-12-cols-vw m-0 bg-primary pt-16 md:columns-3 md:gap-[var(--inner-gutter)] lg:columns-4"},Y=["checked","^id","name","tabindex","value","onChange"],W=["for"],X={key:0,class:"text-secondary"},ee={class:"break-inside-avoid-column"},te={class:T("f-ui-1 relative pl-20 mt-4 inline-block")},ie=["checked","id","name","tabindex","value","onChange"],le=["for"],se={key:0,class:"text-secondary"};function ne(i,t,e,d,o,r){const x=N;return a(),c("div",M,[u(x,{id:`filter${e.id}btn`,button:"",label:e.filter.label,"icon-name":e.activeTab===`filter${e.id}tab`?"ChevronUp400":"ChevronDown400","aria-expanded":e.activeTab===`filter${e.id}tab`,onClick:t[0]||(t[0]=s=>e.toggleActiveTab(`filter${e.id}tab`))},null,8,["id","label","icon-name","aria-expanded"]),l("div",{id:`filter${e.id}tab`,class:T(`tab-wrapper px-10 -mx-10 absolute left-0 overflow-hidden transition-height ${e.activeTab===`filter${e.id}tab`?"h-[var(--max-height)]":"h-0"}`),"aria-labelledby":`filter${e.id}btn`,"aria-hidden":e.activeTab!==`filter${e.id}tab`,onKeydown:t[1]||(t[1]=C(P(s=>e.closePanel(`filter${e.id}btn`),["stop"]),["esc"]))},[l("div",Q,[e.filter.type==="checkbox"?(a(!0),c(g,{key:0},f(e.filter.fields,(s,m)=>(a(),c("div",{key:m,class:"break-inside-avoid-column"},[l("div",{class:"f-ui-1 relative pl-20 mt-4 inline-block",ref_for:!0,ref:"el"},[l("input",{checked:e.selected?e.selected.includes(s.slug):!1,"^id":`${e.id}-${s.id}`,name:e.filter.key,tabindex:e.activeTab!==`filter${e.id}tab`?"-1":null,value:s.slug,type:"checkbox",onChange:_=>i.$emit("filterchange",{field:s,checked:_.target.checked}),class:"absolute top-4 lg:top-5 left-0 mr-6 h-[14px] w-[14px] appearance-none rounded-none border-2 border-primary checked:bg-inverse"},null,40,Y),s.title?(a(),c("label",{key:0,class:"cursor-pointer select-none",for:`${e.id}-${s.id}`},[p(b(s.title)+"  ",1),s.count?(a(),c("span",X,"("+b(s.count)+")",1)):h("",!0)],8,W)):h("",!0)],512)]))),128)):e.filter.type==="radio"?(a(!0),c(g,{key:1},f(e.filter.fields,(s,m)=>(a(),c("div",ee,[l("div",te,[l("input",{checked:s.checked,id:`${e.id}_${m}`,name:e.filter.label,tabindex:e.activeTab!==`filter${e.id}tab`?"-1":null,value:s.slug,type:"radio",onChange:_=>r.onChange(_,s),class:"absolute top-4 lg:top-5 left-0 mr-6 h-[14px] w-[14px] appearance-none rounded-full border-2 border-primary checked:bg-inverse"},null,40,ie),s.title?(a(),c("label",{key:0,for:`${e.id}_${m}`},[p(b(s.title)+"  ",1),s.count?(a(),c("span",se,"("+b(s.count)+")",1)):h("",!0)],8,le)):h("",!0)])]))),256)):h("",!0)])],42,Z)])}const ae=O(K,[["render",ne]]),ce={topics:{label:"Topics",type:"checkbox"},models:{label:"Models",type:"radio"},contentTypes:{label:"Types",type:"checkbox"},authors:{label:"Authors",type:"checkbox"},products:{label:"Products",type:"checkbox"}},oe={props:{allFilters:Object,selected:Object,setSelected:Function,clearSelected:Function,onSubmit:Function,showing:Number,totalResults:Number,sorts:{type:Array},setSort:{type:Function},sort:{type:String},pending:{type:Boolean,default:!1}},data(){return{active:null,activeTabHeight:"0px",accordionHeight:null,activeCheckboxes:[],currentSort:null}},computed:{showingText(){const i=parseFloat(this.showing,10).toLocaleString("en-US"),t=parseFloat(this.totalResults,10).toLocaleString("en-US");return`Showing ${i} of ${t} results`}},watch:{selected:{deep:!0,immediate:!0,handler(i,t){k(()=>{this.activeCheckboxes=this.checkboxes(i)})}}},setup(i){const t=B(()=>Object.keys(i.allFilters).map(o=>({...ce[o]??{},key:o,fields:i.allFilters[o]}))),e=q(JSON.parse(JSON.stringify(i.selected))),d=$();return j(()=>d.query,()=>{k(()=>{e.value=JSON.parse(JSON.stringify(i.selected))})}),{filters:t,filterKeys:Object.keys(i.allFilters),appliedFilters:e}},mounted(){this.$nextTick(()=>{this.setAllContentHeight()}),window.addEventListener("resize",this.handleResize,!1),this.currentSort=this.sort},beforeDestroy(){window.removeEventListener("resize",this.handleResize,!1)},methods:{handleSort(){this.setSort(this.currentSort)},checkboxes(i){return Object.keys(this.appliedFilters).map(t=>(Array.isArray(this.appliedFilters[t])?this.appliedFilters[t]:[this.appliedFilters[t]]).map(e=>typeof this.allFilters[t]>"u"?{slug:e,title:e,key:t,checked:i[t].includes(e)}:this.allFilters[t].filter(({slug:d})=>e===d).map(({title:d,slug:o})=>({title:d,slug:o,key:t,checked:i[t].includes(e)})).pop())).flat()},handleClose(){this.$refs.accordionItem.shadowRoot.querySelector(".ui-accordion-btn").click(),setTimeout(()=>{this.$refs.accordionItem.shadowRoot.querySelector(".ui-accordion-btn").focus()},10)},handleInput(i,{field:t,checked:e},d=!1){this.setSelected(i.key,t.slug,e,d)},closePanel(i){this.active=null,this.activeTabHeight="0px",setTimeout(()=>{this.accordionHeight=null,i&&this.$el.querySelector(`#${i}`).focus()},150)},handleResize(){this.setAllContentHeight(),this.active&&(this.activeTabHeight=this.$el.querySelector(`#${this.active}`).getAttribute("data-height"))},handleSubmit(i){i.preventDefault(),this.active=null,this.activeTabHeight="0px",window.dispatchEvent(new Event("resize")),this.appliedFilters=JSON.parse(JSON.stringify(this.selected)),this.activeCheckboxes=this.checkboxes(this.selected),this.onSubmit(i)},handleReset(i){i.preventDefault(),this.active=null,this.activeTabHeight="0px",window.dispatchEvent(new Event("resize")),this.appliedFilters=[],this.activeCheckboxes=[],this.clearSelected(),this.onSubmit(i)},setAllContentHeight(){const i=this.$el.querySelectorAll(".tab-wrapper");i&&i.forEach(t=>{const e=t.querySelector(".tab-content");t.removeAttribute("style"),t.setAttribute("style",`--max-height:${e.clientHeight+5}px`),t.setAttribute("data-height",`${e.clientHeight}px`)})},toggleActive(i){const t=this.$el.querySelector(`#${i}`);this.active!==i?(this.setAllContentHeight(),this.active=i,this.accordionHeight="auto",this.activeTabHeight=t.getAttribute("data-height")):(this.active=null,this.activeTabHeight="0px",setTimeout(()=>{this.accordionHeight="auto"},150))}}},re={class:"mt-spacing-7 w-full"},de={class:"cols-container"},he={class:"mt-16 xs:w-6-cols md:w-2-cols md:mt-0 md:text-right lg:w-2-cols"},ue={class:"relative inline-block"},be=l("label",{for:"sortSelect",class:"sr-only"},"Sort order",-1),me=["value"],_e={key:0},ge={class:"mt-12 flex flex-row flex-wrap p-0 m-0"},ve=["id","checked","value","onChange"],fe=["for"],xe={class:"mt-spacing-5 pb-8"},ye={class:"cols-container md:items-center"},pe={class:"xs:w-6-cols md:w-2-cols lg:w-2-cols"},ke={class:"mt-16 xs:w-6-cols md:w-2-cols md:mt-0 lg:w-2-cols"},we={class:"mt-16 xs:w-6-cols md:w-4-cols md:mt-0 md:text-right lg:w-8-cols"},Se={class:"f-body-1"};function Te(i,t,e,d,o,r){const x=L,s=D,m=ae,_=U,I=z;return a(),c("div",re,[e.pending?h("",!0):(a(),w(I,{key:0,ref:"accordionItem",class:"filters-accordion",classOverride:"border-t border-secondary",index:1,contentHeightOverride:o.accordionHeight,richtext:!1},{title:S(()=>[p(" Filter and sort "),u(x,{"aria-hidden":"true",name:"FilterAndSort600",size:"text",class:"a-icon--no-align inline relative -top-[0.1em] ml-4"})]),default:S(()=>[l("div",{onKeydown:t[2]||(t[2]=C(n=>r.handleClose(),["esc"]))},[l("div",de,[l("fieldset",{class:"relative -mb-5 flex flex-row transition-all xs:w-6-cols md:w-6-cols lg:w-10-cols","aria-label":"Filters",style:G(`padding-bottom: calc(${o.activeTabHeight} + 5px)`)},[l("legend",null,[u(s,{level:"4",title:"Filter selections",class:"sr-only"})]),(a(!0),c(g,null,f(d.filters,(n,y)=>(a(),c(g,{key:y},[n.label?(a(),w(m,{key:0,filter:n,id:d.filterKeys[y],toggleActiveTab:r.toggleActive,activeTab:o.active,closePanel:r.closePanel,selected:e.selected[n.key],onFilterchange:v=>r.handleInput(n,v),onRadiochange:v=>r.handleInput(n,v,!0)},null,8,["filter","id","toggleActiveTab","activeTab","closePanel","selected","onFilterchange","onRadiochange"])):h("",!0)],64))),128))],4),l("fieldset",he,[l("legend",null,[u(s,{level:"4",title:"Sort options",class:"sr-only"})]),l("div",ue,[be,J(l("select",{id:"sortSelect",class:"m-0 appearance-none pt-0 pr-20 pb-0 pl-0 md:text-right",onChange:t[0]||(t[0]=(...n)=>r.handleSort&&r.handleSort(...n)),"onUpdate:modelValue":t[1]||(t[1]=n=>o.currentSort=n)},[(a(!0),c(g,null,f(e.sorts,n=>(a(),c("option",{value:n.value},b(n.label),9,me))),256))],544),[[V,o.currentSort]]),u(x,{name:"ChevronDown400","aria-hidden":"true",class:"a-icon--no-align absolute top-[0.2em] right-0",size:"text"})])])]),o.activeCheckboxes.length>0?(a(),c("fieldset",_e,[l("legend",null,[u(s,{level:4,title:"Current Filters",class:"sr-only"})]),l("ul",ge,[(a(!0),c(g,null,f(o.activeCheckboxes,(n,y)=>(a(),c("li",{key:y,class:"mt-12 mr-24 list-none p-0"},[l("div",{class:"f-ui-1 relative pl-20",ref_for:!0,ref:"el"},[l("input",{id:n.slug,name:"activated",type:"checkbox",checked:n.checked,value:n.slug,onChange:v=>e.setSelected(n.key,n.slug,v.target.checked),class:"absolute top-[0.25em] left-0 mr-6 h-[14px] w-[14px] appearance-none rounded-none border-2 border-primary checked:bg-inverse"},null,40,ve),n.title?(a(),c("label",{key:0,class:"cursor-pointer select-none",for:n.slug},b(n.title),9,fe)):h("",!0)],512)]))),128))])])):h("",!0),l("div",xe,[l("div",ye,[l("div",pe,[u(_,{classes:"w-full",label:"Apply",modifier:"default",onClick:r.handleSubmit},null,8,["onClick"])]),l("div",ke,[u(_,{label:"Reset",classes:"w-full",modifier:"outline",onClick:r.handleReset},null,8,["onClick"])]),l("div",we,[l("span",Se,b(r.showingText),1)])])])],32)]),_:1},8,["contentHeightOverride"]))])}const Ee=O(oe,[["render",Te]]),He={[F]:20,[A]:20,[E]:20,[H]:20,[R]:12},Re={[F]:4,[A]:4,[E]:4,[R]:3,[H]:4};export{Re as D,Ee as _,He as a};

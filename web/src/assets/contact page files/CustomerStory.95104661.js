import{a as w,_ as E}from"./indexComponents.44e4cc59.js";import{_ as I}from"./Listing.a298d72a.js";import{a as B,u as z,_ as N}from"./useResourceIndexData.dc2ced4d.js";import{h as R,ab as A,y as D,o as i,c as L,b as M,C as T,H as V,a as u,d as e,i as j,m as G,k as U,Q as $}from"./entry.b64d388a.js";const K={__name:"CustomerStory",props:{filters:{type:Object,default:{}},resultsOnly:{type:Boolean,default:!1},search:String},setup(o){const l=o,{$api:m,$helpers:d}=R(),p=z(),{indexFilters:g,setIndexFilters:_}=B();_((l==null?void 0:l.filters)??{},{default:"customerStoriesCount"});const{data:s,pending:n,selectedFilters:f,setSelectedFilter:S,clearSelectedFilters:h,onSubmit:x,sort:b,sorts:C,setSort:F,page:t,setCurrentPage:P,currentPage:H}=p({name:"customer-stories",fetchCallback:m.indexCustomerStories,fetchCallbackOptions:{pageSize:w[A]},search:l.search??null}),k=D(()=>{var a,r;return((a=s==null?void 0:s.value)==null?void 0:a.resources)&&d.cards((r=s==null?void 0:s.value)==null?void 0:r.resources)});return(a,r)=>{var c;const v=E,y=I,O=N;return i(),L("form",{ref:"form",onSubmit:r[0]||(r[0]=$(()=>{},["prevent"])),"data-index-scroll-element":""},[M("div",{class:U({container:!o.resultsOnly})},[T(u(v,{selected:e(f),setSelected:e(S),clearSelected:e(h),allFilters:e(g),"on-submit":e(x),sorts:e(C),"set-sort":e(F),sort:e(b),showing:e(t)?Math.min(e(t).perPage,e(t).total):0,"total-results":(c=e(t))==null?void 0:c.total,pending:e(n)&&(!Object.keys(o.filters).length||!e(t)),"data-index-scroll-element":""},null,8,["selected","setSelected","clearSelected","allFilters","on-submit","sorts","set-sort","sort","showing","total-results","pending"]),[[V,!o.resultsOnly]]),u(y,{blockLink:!0,items:e(k),listOnly:!0,pending:e(n),itemsPerRow:3},null,8,["items","pending"]),e(t)&&e(t).total?(i(),j(O,{key:0,"total-results":e(t).total,"current-page":e(t).currentPage,"from-value":e(t).from,pages:e(t).lastPage,"size-value":e(t).perPage,onPageChange:e(P)},null,8,["total-results","current-page","from-value","pages","size-value","onPageChange"])):G("",!0)],2)],544)}}};export{K as _};
